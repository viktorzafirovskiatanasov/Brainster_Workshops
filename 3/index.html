<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1, shrink-to-fit=no"
        />

        <!-- Bootstrap CSS -->
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
            integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N"
            crossorigin="anonymous"
        />

        <title>Hello, world!</title>
    </head>
    <body>
        <nav class="navbar navbar-expand-lg navbar-light bg-light px-5">
            <a class="navbar-brand text-primary" href="#">Weather App</a>
            <button
                class="navbar-toggler"
                type="button"
                data-toggle="collapse"
                data-target="#navbarNav"
                aria-controls="navbarNav"
                aria-expanded="false"
                aria-label="Toggle navigation"
            >
                <span class="navbar-toggler-icon"></span>
            </button>
            <div
                class="collapse navbar-collapse justify-content-end text-primary"
                id="navbarNav"
            >
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link text-primary" href="#">Current</a>
                    </li>
                </ul>
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link text-primary" href="./forecast.html"
                            >Forecast</a
                        >
                    </li>
                </ul>
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link text-primary" href="#"
                            >Open Weather Map</a
                        >
                    </li>
                </ul>
            </div>
        </nav>
        <div class="container-fluid text-center text-white px-0">
            <h1 class="py-5 bg-primary">Get Current Weather Information</h1>
            <p class="text-primary">Enter City Name</p>
            <div class="row">
                <div class="col-4 offset-4">
                    <input type="text" id="inputCity" />
                    <button
                        type="button"
                        class="btn btn-outline-primary"
                        id="searchCity"
                    >
                        Search City
                    </button>
                </div>
            </div>
            <div class="row mt-3">
                <div
                    class="col-4 offset-4 bg-primary text-white rounded"
                    id="weatherContent"
                >
                    <!-- <h4>Current Weather for {CITY}, {STATE}</h4>
                    <div class="text-left">
                        <p><b>Weather:</b> {weather}</p>
                        <p><b>Description:</b> {weather}</p>
                        <p><b>Temperature:</b> {weather}</p>
                        <p><b>Pressure:</b> {weather}</p>
                        <p><b>Humidity:</b> {weather}</p>
                        <p><b>Min Temp.:</b> {weather}</p>
                        <p><b>Max Temp.:</b> {weather}</p>
                        <p><b>Wind Speed:</b> {weather}</p>
                        <p><b>Wind Direction:</b> {weather}</p>
                    </div> -->
                </div>
            </div>
        </div>
        <div
            class="container-fluid bg-primary text-center text-white px-0 my-4"
        >
            <p class="py-2">Copyright © Weather App</p>
        </div>
        <!-- <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script> -->
        <script
            src="https://code.jquery.com/jquery-3.5.1.min.js"
            integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
            crossorigin="anonymous"
        ></script>
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct"
            crossorigin="anonymous"
        ></script>
        <script>
            $("#searchCity").click(function () {
                const city = $("#inputCity").val();

                if (city == "") {
                    return;
                }

                $.ajax({
                    url: "http://api.openweathermap.org/data/2.5/weather",
                    type: "GET",
                    dataType: "json",
                    data: {
                        q: city,
                        units: "metric",
                        APPID: "c10bb3bd22f90d636baa008b1529ee25",
                    }
                    // another way of handling responses with AJAX
                    // ,
                    // success: function (res) {
                    //     console.log('from success', res)
                    // },
                    // error: function (err) {
                    //     console.log('from err', err)
                    // },
                }).done(function (res) {
                    console.log(res);
                    $('#weatherContent').html('')
                    $('#weatherContent').append(`<h4>Current Weather for ${res.name}, ${res.sys.country}</h4>
                                                <div class="text-left">
                                                    <p><b>Weather:</b> ${res.weather[0].main}</p>
                                                    <p><b>Description:</b><img src="http://api.openweathermap.org/img/w/${res.weather[0].icon}.png"/> ${res.weather[0].description}</p>
                                                    <p><b>Temperature:</b> ${res.main.temp}°C</p>
                                                    <p><b>Pressure:</b> ${res.main.pressure} hpa</p>
                                                    <p><b>Humidity:</b> ${res.main.humidity} %</p>
                                                    <p><b>Min Temp.:</b> ${res.main.temp_min}°C</p>
                                                    <p><b>Max Temp.:</b> ${res.main.temp_max}°C</p>
                                                    <p><b>Wind Speed:</b> ${res.wind.speed}m/s</p>
                                                    <p><b>Wind Direction:</b> ${res.wind.deg}°</p>
                                                </div>`);
                })
            });
        </script>
    </body>
</html>
<!-- http://api.openweathermap.org/img/w/03n.png -->